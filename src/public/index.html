<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8">
    <!-- import CSS -->
    <link rel="stylesheet" href="https://unpkg.com/element-ui/lib/theme-chalk/index.css">
</head>

<style>
    .bg-purple {
        background: #d3dce6;
    }

    .grid-content {
        border-radius: 4px;
        font-size: 60px;
        text-align: center;
        color: #333;
        margin-top: 80px;
        margin-bottom: 150px;
        padding: 15px;
    }

    .my-button {
        width: 200px;
        height: 60px;
        font-size: 24px;
    }
</style>

<body>
    <div id="app">
        <el-row>
            <el-col :span="12" :offset="6">
                <div class="grid-content bg-purple">Aha Home Exam</div>
            </el-col>
        </el-row>
        <el-row>
            <el-col :span="3" :offset="9">
                <el-button id="login_button" type="primary my-button" onclick="window.location.href='/login'">登入 / 註冊</el-button>
                <el-button id="logout_button" type="danger my-button" onclick="window.location.href='/logout'" style="display: none">登出</el-button>
            </el-col>
            <el-col :span="3" :offset="2">
                <el-button type="primary my-button">重設密碼</el-button>
            </el-col>
        </el-row>
    </div>
</body>
<!-- import Vue before Element -->
<script src="https://unpkg.com/vue@2/dist/vue.js"></script>
<!-- import JavaScript -->
<script src="https://unpkg.com/element-ui/lib/index.js"></script>
<script src="https://code.jquery.com/jquery-3.4.1.js"></script>
<script>
    new Vue({
        el: '#app',
        data: function () {
            return { visible: false }
        }
    })
    window.onload = async () => {

        // 獲取當前帳號是否為登入狀態
        $.ajax({
            url: '/user/profile',
            method: 'GET',
            success: function (result) {

                let loginBtn = document.getElementById('login_button');
                let logoutBtn = document.getElementById('logout_button');
                
                // 如果為登入狀態，則顯示登出按鈕，隱藏登入按鈕
                if(result.data.isAuthenticated) {
                    loginBtn.style.display = 'none';
                    logoutBtn.style.display = 'block';
                } 
                // 否則則顯示登入按鈕，隱藏登出按鈕
                else {
                    loginBtn.style.display = 'block';
                    logoutBtn.style.display = 'none';
                }
            }
        });
    }
</script>

</html>